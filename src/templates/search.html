{% extends 'base.html' %}

{% block title %}Search{% endblock %}

{% block content %}

    <div style="text-align: center">
        <img src="../static/images/y_combinator_logo.png" style="width: 5%" class="rounded">
    </div>

    <div>
        {% for message in get_flashed_messages() %}
        <div class="alert alert-warning alert-dismissible fade show" role="alert" style="color: black">
            <i>{{message}}</i>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close" style="color: black">
            <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endfor %}
    </div>

    </br>
    
    <div class="card">
        <div class="card-header" style="background-color: #f6f6ef;">
            <h1>Search Results</h1>
        </div>

        <div class="card-body">
            <div>
                <p><i>You searched for {{filled_search}}</i></p>
            </div>
            {% for post in posts %}
            <div class="shadow p-3 mb-5 bg-white rounded card">
                <div>
                    <strong>Title: </strong>{{post.title}}</br>
                    <strong>Author: </strong>{{post.poster.name}}</br>
                    <strong>Post Date: </strong>{{post.date_posted}}</br>
                    <strong>Content: </strong>{{post.content | safe}}</br>
                    <strong>ID: </strong>{{post.id}}</br>
                </div>
                </br>
                <div>
                    <button type="button" class="btn btn-primary btn-sm"><a href="{{url_for('view_post', id=post.id)}}">View Post</a></button>&nbsp
                    {% if post.poster_id == current_user.id %}
                        <button type="button" class="btn btn-info btn-sm"><a href="{{url_for('edit_post', id=post.id)}}">Edit Post</a></button>&nbsp
                        <button type="button" class="btn btn-danger btn-sm"><a href="{{url_for('delete_post', id=post.id)}}">Delete Post</a></button>
                    {% endif %}    
                </div>
            </div>
            {% endfor %}
        </div>
        <h6 class="card-footer" style="text-align: center; background-color: #f6f6ef;"><i>This website is created by Minh T. Nguyen</i></h6>
      </div>
{% endblock %}